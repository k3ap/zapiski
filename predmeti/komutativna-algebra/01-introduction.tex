\naslov{Introduction}

\podnaslov{Rings}

\begin{definition}
  A \pojem{ring} is a set $A$, combined with operations $+$ and $\cdot$, such
  that $(A, +)$ is an Abelian group, $(A, \cdot)$ is a monoid, and
  distributivity holds: $a(b+c) = ab+ac$, $(b+c)a = ba+ca$ for any $a, b, c \in
  A$.
\end{definition}

\begin{remark}
  We will assume that all rings are commutative.
\end{remark}

\begin{example}
  We know of a few simple rings:
  \begin{itemize}
  \item $\Z$,
  \item $\Z[i] = \{a + bi \such a, b \in \Z\}$,
  \item the \pojem{zero ring} $\underline{0} = \{0\}$,
  \item if $A$ is a ring, then $A[X], A[X_1, \ldots, X_n]$ are also rings,
  \item if $M$ is an Abelian group, $\End(M)$ is (usually) a non-commutative
	ring,
  \item if $K$ is a field and $V$ is a $K$-vector space of finite dimension
	$d>1$, then $\End(V) \cong M_d(K)$ is a non-commutative ring,
  \item if $X$ is a topological space, $\zvezne{X, \R}$ is a ring with pointwise
	operations,
  \item if $\{A_i\}_{i \in I}$ is a family of rings, then
	\[
	  \prod_{i \in I} A_i
	\]
	is a ring,
  \item if $A$ is a ring, the set of formal power series' $A\llbracket X
	\rrbracket$ consists of sequences $f: \N_0 \to A$ with operations $(f+g)(n)
	= f(n) + g(n)$ and
	\[
	  (fg)(n) = \sum_{k=0}^n f(k) g(n-k).
	\]
  \item We can also introduce other products for sequences:
	\begin{gather*}
	  (fg)(n) = f(n) g(n) \qquad \text{(pointwise product)} \\
	  (f * g)(n) = \sum_{d | n} f(d) g(n / d) \qquad \text{(Dirichlet's
		convolution)}
	\end{gather*}
  \item if $\{A_i\}_{i \in I}$ is a family of subrings of $A$, then their
	intersection is a subring of $A$.
  \end{itemize}
\end{example}

\begin{definition}
  Let $A$ be a ring and $a \in A$.
  Then
  \begin{itemize}
  \item $a$ is \pojem{invertible} (or a \pojem{unit}) if there exists
	$b \in A$ such that $ab = 1$,
  \item $a$ is a \pojem{zero divisor} if there exists an element $b \in A \setminus
	\{0\}$ such that $ab = 0$,
  \item $a$ is \pojem{nilpotent} if $a^n = 0$ for some $n$.
  \end{itemize}
\end{definition}

\begin{definition}
  We label the group of units of $A$ by $A^*$ or $A^x$, and we label the set of
  non-zero-divisors by $A^\cdot$.
\end{definition}

\begin{definition}
  A ring $A$ is an \pojem{(integral) domain} if $A \ne \underline{0}$ and $ab =
  0$ implies $a = 0$ or $b = 0$ for any $a, b \in A$.
\end{definition}

\begin{remark}
  This is equivalent to the statement that $0$ is the only zero-divisor of $A$.
\end{remark}

\begin{example}
  Let $f = \sum f(n) x^n \in A\llbracket x \rrbracket$.
  Then $f$ is invertible if and only if $f(0) \in A^x$.
\end{example}

\begin{definition}
  If $A \le B$ are rings and $S \subseteq B$ is a subset, then
  \[
	A[S] = \bigcap_{A \le A' \le B, S \subseteq A'} A'
  \]
  is the subring of $B$ obtained by adjoining $S$ to $A$.
\end{definition}

\begin{remark}
  Note that
  \[
	A[S] = \left\{ \sum_{i=1}^m a_i s_i \such a_i \in A, s_i \in S, m \in \N
	\right\}.
  \]
\end{remark}

\begin{definition}
  A subset $I \subseteq A$ is an \pojem{ideal} if $I \ne \varnothing$ and $I$
  is closed under addition and (left) multiplication with elements of $A$.
  We denote $I \trianglelefteq A$.
\end{definition}

\begin{remark}
  Given an ideal $I$ of $A$, the quotient $A/I = \{ a + I \such a \in A \}$ is a
  ring.
  We sometimes also label $a + I = \bar{a} = [a] = [a]_I$.
\end{remark}

\begin{definition}
  If $X \subseteq A$, then $(X)$ (or $\sk{X}$) is the ideal generated by $X$, so
  the smallest ideal of $A$ which includes $X$.
\end{definition}

\begin{definition}
  The \pojem{principal ideals} are those generated by a single element, $(a) =
  Aa$.
\end{definition}

\begin{example}
  The ideals of $\Z$ are $\{n \Z \such n \in \N_0 \}$.
\end{example}

\begin{example}
  The ideal $(x,y) \trianglelefteq K[x,y]$ is not principal.
\end{example}

\begin{remark}
  If $I \trianglelefteq A$, then $A = I$ if and only if $1 \in I$.
  This is also equivalent to $I \cap A^x \ne \varnothing$.
\end{remark}

\begin{definition}
  An ideal $I \trianglelefteq A$ is
  \begin{itemize}
  \item a \pojem{prime ideal} if $I$ is proper and for any $a, b \in A$, if $ab
	\in I$, then $a \in I$ or $b \in I$,
  \item a \pojem{maximal ideal} if $I$ is proper and if for all $J
	\trianglelefteq A$, $I \subseteq J$ implies $J = A$.
  \end{itemize}
  The spectrum $\Spec(A)$ is the set of all prime ideals.
  The set of all maximal ideals is denoted by $\Max(A)$.
\end{definition}

\begin{theorem}
  An ideal $I$ of $A$ is prime if and only if $A/I$ is a domain.
  It is maximal if and only if $A/I$ is a field.
\end{theorem}

\begin{corollary}
  All maximal ideals are prime.
\end{corollary}

\begin{remark}
  Every ideal is contained in a maximal ideal (if Zorn's lemma is true).
\end{remark}

\begin{example}
  The prime ideals of $\Z$ are $\{ p \Z \such \text{$p$ prime} \} \cup \{ \{0\}
  \}$.
  Each of $p\Z$ is also maximal, as $\Z / p \Z = \Z_p$ is a field.
\end{example}

\begin{example}
  In $K[x,y]$, we have $\underline{0} \subsetneq (x) \subsetneq (x,y)$.
  Each of these are prime ideals, and $(x,y)$ is maximal.
\end{example}

\begin{remark}
  The trivial ideal $\underline{0}$ is prime if ad only if $A$ is a domain.
\end{remark}

\begin{definition}
  If $I, J \trianglelefteq A$, then the following are also ideals:
  \begin{itemize}
  \item $I + J = \{ a + b \such a \in I, b \in J \} = (I,J)$,
  \item $I \cap J$,
  \item $I \cdot J = (\{ ab \such a \in I, b \in J \})$ (ideal generated by the
	products),
  \item radial ideal: $\sqrt{I} = \{ a \in A \such \exists n \ge 1 . a^n \in I
	\}$.
  \end{itemize}
\end{definition}

\begin{remark}
  The non-trivial step in proving that the radical ideal really is an ideal is
  that it is closed under addition.
  Let $a, b \in \sqrt{I}$.
  Then let $n$ be large enough that $a^n, b^n \in I$.
  Compute
  \[
	(a+b)^{2n} = \sum_{i=0}^{2n} a^i b^{2n-i} \binom{2n}{i}.
  \]
  If $i \ge n$, then $a^i \in I$, but if $i \le n$, then $b^{2n-i} \in I$.
  So in every case, the terms of the sum are in $I$, which means the entire sum
  is in $I$.
\end{remark}

\begin{remark}
  Note that $\sqrt{I}$ is not necessarily an ideal in a non-commutative ring.
\end{remark}

\begin{definition}
  The \pojem{nilradical} of $A$ is $N(A) = \sqrt{\underline{0}}$ (the set of all
  nilpotents).
  The \pojem{Jacobson radical} $J(A)$ is the intersection of all maximal ideals.
\end{definition}

\begin{remark}
  If $A \ne \underline{0}$, then $N(A), J(A)$ are proper ideals.
\end{remark}

\begin{lemma}
  \label{lemma:koma-01-jacobson}
  For any ring $A$, $N(A) \subseteq J(A)$.
  Also, $J(A) = \{ a \in A \such \forall b \in A . 1 - ba \in A^x \}$.
\end{lemma}

\begin{proof}
  For the first point, take $a \in N(A)$, so $a^n = 0$ for some $n \ge 1$.
  If $M \in \Max(A)$, then $a^n \in M$, as $0$ is in every ideal.
  Since $M$ is prime, this implies $a \in M$.

  For the second point, let $a \in J(A)$ and $b \in A$.
  For any $M \in \Max(A)$, $1 - ab \notin M$, as since $a \in M$, also $ab \in
  M$, but then if $1 - ab \in M$, this implies $1 \in M$.
  So $1 - ab$ cannot be in any maximal ideal, which means $(1-ab) = A$.
  But then $1 - ab \in A^x$, as also $1 \in (1-ab) A = A$.

  For the other inclusion, let $a \in A$ be such that for every $b \in A$, we
  have $1 - ab \in A^x$.
  Let $M \in \Max(A)$ and suppose $a \notin M$.
  Then $(M, a) = A$, so $1 = m + xa$ for some $m \in M, x \in A$.
  This means $m = 1 - xa \in M$, but this element is invertible by assumption,
  so $M = A$.
  \protislovje{}
\end{proof}

\begin{lemma}[prime avoidance]
  Let $I$ be an ideal of $A$ and let $P_1, \ldots, P_n \in \Spec(A)$.
  If $I \subseteq P_1 \cup \ldots \cup P_n$, then there exists some $k$ such
  that $I \subseteq P_k$.
\end{lemma}

\begin{proof}
  Induction on $n$.
  If $n = 1$, there is nothing to do.
  Let $n > 1$.
  Suppose that for any $i$, there is an element $a_i \in I \setminus \bigcup_{j
	\ne i} P_j$, so $a_i \in P_i$.
  Consider
  \[
	a = \sum_{j=1}^n a_1 \ldots \hat{a}_j \ldots a_n
	= \underbrace{a_1 \ldots \hat{a}_i \ldots a_n}_{\notin P_i} +
	\underbrace{\sum_{j \ne i} a_1 \ldots \hat{a}_j \ldots a_n}_{\in P_i}
  \]
  for some arbitrary $i$, because otherwise there would exist some $j \ne i$
  such that $a_j \in P_i$ by primality of $P_i$, contradicting the choice of
  $a_j$.

  So $a \notin P_i$ for all $i$.
  This is a contradiction, as $a \in I \subseteq P_1 \cup \ldots \cup P_n$.
\end{proof}

\begin{lemma}
  Let $I_1, \ldots, I_n$ be ideals of $A$ and let $P \in \Spec(A)$.
  If $I_1 \cap \ldots \cap I_n \subseteq P$, then there exists some $k$ such
  that $I_k \subseteq P$.
\end{lemma}

\begin{proof}
  Suppose that for every $j$, $I_j \nsubseteq P$, so there exist $a_j \in I_j
  \setminus P$.
  Then $a_1 \ldots a_n \in I_1 \ldots I_n \subseteq I_1 \cap \ldots \cap I_n
  \subseteq P$.
  Since $P$ is prime, this implies there exists a $j$ such that $a_j \in P$,
  which is a contradiction.
\end{proof}

\begin{remark}
  If $f: A \to B$ is a ring homomorphism, then $\jedro f \trianglelefteq A$.
  More generally, if $I \trianglelefteq B$, then $f^{-1}(I) \trianglelefteq A$.
  Also, if $P \in \Spec(B)$, then $f^{-1}(P) \in \Spec(A)$.
\end{remark}

\begin{proposition}[universal property for quotients]
  Let $I \trianglelefteq A$ and $\pi : A \to A/I$ be the canonical epimorphism.
  For every ring homomorphism $f: A \to B$ with $I \subseteq \jedro f$, there
  exists a unique ring homomorphism $\hat{f}: A/I \to B$ such that $f = \hat{f}
  \circ \pi$.
\end{proposition}

\begin{corollary}[first isomorphism theorem]
  If $f: A \to B$ is a ring homomorphism, then $A / \jedro f \cong f(A)$.
\end{corollary}

\begin{theorem}[isomorphism theorems]
  Let $I \trianglelefteq A$.
  Then
  \begin{itemize}
  \item $\{ J \trianglelefteq A \such I \subseteq J \subseteq A \}$ is in a
	bijective correspondence with the ideals of $A/I$, with the map
	\[
	  J \mapsto J/I = \{ a + I \such a \in J \},
	\]
  \item if $J \trianglelefteq A$ is such that $I \subseteq J \subseteq A$,
	\[
	  A/J \cong \frac{A/I}{J/I},
	\]
  \item if $B \subseteq A$ is a subring, then $B+I$ is a subring of $A$, $B \cap
	I \trianglelefteq B$, and
	\[
	  \frac{B+I}{I} \cong \frac{B}{B \cap I}.
	\]
  \end{itemize}
\end{theorem}

\begin{theorem}[Chinese remainder theorem]
  If $I_1, \ldots, I_n \trianglelefteq A$ are pairwise comaximal (so $I_i + I_j
  = A$ for any $i, j$), then
  \[
	A / I_1 \cap \ldots \cap I_n \cong A/I_1 \times \cdots \times A / I_n
  \]
  and $I_1 \cap \ldots \cap I_n = I_1 \cdot \cdots \cdot I_n$.
\end{theorem}

\begin{example}
  $\Z / p^n q^m \Z \cong \Z/ p^n \Z \times \Z/q^m \Z$ for primes $p, q$.
\end{example}

\podnaslov{Modules}

\begin{definition}
  Let $A$ be a ring. A \pojem{module} $M$ is an additive Abelian group with a
  scalar multiplication operation $\cdot: A \times M \to M$, such that
  \begin{itemize}
  \item $1 m = m$,
  \item $(ab)m = a(bm)$,
  \item $(a+b)m = am + bm$,
  \item $a(m+n) = am + an$.
  \end{itemize}
\end{definition}

If $M$ is an Abelian group, an $A$-module structure can equivalently be
described by a ring homomorphism $\varepsilon: A \to \End(M)$, called the
\pojem{structure homomorphism}.
Given a module, we can define
\[
  \varepsilon(a)(m) = am,
\]
and in the other direction, the scalar product is given by $am :=
\varepsilon(a)(m)$.

\begin{example}
  The $\Z$-modules are precisely the Abelian groups.
\end{example}

\begin{example}
  If $K$ is a field, then $K$-modules are precisely the $K$-vector spaces.
\end{example}

\begin{remark}
  The submodules of $A$ are precisely the ideals of $A$.
\end{remark}

\begin{example}
  If $V$ is a $K$-vector space, and $\varphi \in \End_K(V)$, then we can
  construct a ring homomorphism $\phi: K[x] \to \End_K(V)$ by
  \[
	\sum_{i=0}^n a_i x^i \mapsto \sum_{i=0}^n a_i \varphi^i.
  \]
  This induces a $K[x]$-module structure on $V$, with $x$ acting as $\varphi$,
  $x \cdot v = \varphi(v)$.
  Since $K[x]$ is a principal ideal domain, $\jedro \phi = (m_\varphi)$ for some
  $m_\varphi$, which turns out to be the minimal polynomial of $\varphi$.
\end{example}

Let $M$ be an $A$-module and $E \subseteq M$.
Then we define
\[
  \sk{E}_A = \left\{
	\sum_{i=1}^n a_i m_i \such a_i \in A, m_i \in E
  \right\}
\]
as the $A$-module generated by $E$ (it is of course the smallest submodule that
includes $E$).

If $\{N_i\}_{i\in I}$ is a family of submodules, then the intersection of all
$N_i$ is a submodule, as is
\[
  \sum_{i \in I} M_i = \sk{\bigcup_{i \in I} M_i}.
\]

If $I \trianglelefteq A$, then
\[
  IM = \left\{
	\sum_{i=1}^n a_i m_i \such a_i \in I, m_i \in M
  \right\}
\]
is also a submodule of $M$.

\begin{remark}
  Let $\varphi: A \to B$ be a ring homomorphism.
  If $N$ is a $B$-module, then it is also an $A$-module via $an := \varphi(a)
  n$.
  Similarly, if $\varphi$ is an epimorphism and $M$ is an $A$-module such that
  $IM = 0$ for $I = \jedro \varphi$, then $M$ is also a $B$-module via $bm :=
  am$ for any $a \in \varphi^{-1}(b)$.
\end{remark}

\begin{remark}
  In particular, if $M$ is an $A$-module and $I \trianglelefteq A$, then $M /
  IM$ is an $A/I$-module via $(a+I)(m + IM) = am + IM$.
\end{remark}

\begin{remark}
  This construction gives a category equivalence between the category of
  $A$-modules $M$ with $IM = 0$ and the category of $A/I$-modules.
\end{remark}

\begin{example}
  If $M$ is an Abelian group (so $\Z$-module) and $p$ is prime, then $M/pM$ is a
  $\Z/p\Z$-vector space.
\end{example}

\begin{theorem}[Isomorphism theorems]
  Let $M$ be a module and $N, N'$ submodules.
  \begin{itemize}
  \item $\im f \cong M / \jedro f$ for any module homomorphism $f$,
  \item there is a bijection between $\{ X \such N \le X \le M \}$ and the
	submodules of $M/N$,
  \item if $N \le X \le M$, then
	\[
	  M/N \cong \frac{M/N}{X/N},
	\]
  \item $(N + N')/N \cong N' / (N \cap N')$.
  \end{itemize}
\end{theorem}

Let $\{M_i\}_{i \in I}$ be a family of $A$-modules.
Then the product is defined as
\[
  \prod_{i \in I} M_i = \{ \{m_i\}_{i \in I} \such m_i \in M_i \}
\]
and the direct sum (coproduct) as
\[
  \bigoplus_{i \in I} M_i = \{ \{m_i\}_{i \in I} \such m_i \in M_i, \text{$m_i
	\ne 0$ for finitely many $i$} \}.
\]
These have the usual (universal) properties.

\begin{remark}
  If $I$ is finite, then the direct sum and direct product over $I$ are
  isomorphic.
\end{remark}

\begin{remark}
  If all $M_i$ are submodules of some module $M$, then
  \[
	M' = \sum_{i \in I} M_i
  \]
  (the smallest submodule of $M$ which includes all $M_i$)
  is an internal direct sum if and only if the natural epimorphism $\oplus_i M_i
  \to \sum_i M_i$ is an isomorphism.
  This is equivalent to the condition that every $m \in M'$ has a unique
  representation
  \[
	m = \sum_{i \in I'} m_i
  \]
  for $m_i \in M_i$ and $I' \subset I$ some finite subset.
  This is again equivalent to the condition that for any $M_j$,
  \[
	M_j \cap \sum_{i \ne j} M_i = \varnothing.
  \]
\end{remark}

\begin{definition}
  A module $M_A$ is \pojem{free} if $M_A \cong A_A^{(I)} = \oplus_{i \in I} A$
  for some $I$.
  A \pojem{basis} of $M_A$ is a family $\{m_i\}_{i \in I}$ such that
  \[
	\{a_i\}_{i \in I} \mapsto \sum_{i \in I} a_i m_i
  \]
  is an $A^{(I)} \to M$ isomorphism.
\end{definition}

\begin{example}
  If $K$ is a field, then every $K$-module is free.
\end{example}

\begin{example}
  As a $\Z$-module, $\Z^n$ is free.
\end{example}

\begin{example}
  As a $\Z$-module, $\Z / n \Z$ is not free (for $n \ne 0$).
\end{example}

\begin{example}
  As a $(\Z / n \Z)$-module, $\Z / n \Z$ is free.
\end{example}

\begin{example}
  As a $\Z$-module, $\Q$ is not free.
\end{example}

\begin{remark}
  Every module $M_A$ is a quotient of a free module.
\end{remark}

\begin{definition}
  A module $M_A$ is \pojem{finitely generated} if it is generated by a finite
  number of elements.
\end{definition}

\begin{remark}
  This is equivalent to the existence of an epimorphism $A_A^k \to M$ for some
  $k \ge 0$.
\end{remark}

\begin{example}
  As a $\Z$-module, $\Q$ is not finitely generated.
\end{example}

\begin{lemma}[Nakayama]
  Let $M$ be a finitely generated $A$-module.
  \begin{itemize}
  \item If $J(A) M = M$, then $M = 0$.
  \item If $N \le M$ such that $M = N + J(A) M$, then $M = N$.
  \end{itemize}
\end{lemma}

\begin{proof}
  Suppose $M \ne 0$.
  Since $M$ is finitely generated, there exists a minimal generating set $m_1,
  \ldots, m_r$.
  By assumption, since $M = J(A) M$, we have
  \[
	m_r = a_1 m_1 + \ldots + a_r m_r
  \]
  where all $a_i \in J(A)$.
  This implies $(1 - a_r) m_r = a_1 m_1 + \ldots + a_{r-1} m_{r-1}$, so $(1 -
  a_r) m_r \in \sk{m_1, \ldots, m_{r-1}}$.
  But by lemma~\ref{lemma:koma-01-jacobson}, $1 - a_r$ is invertible, so $m_r
  \in \sk{m_1, \ldots, m_{r-1}}$, which contradicts the minimality of $r$.

  For the second part, apply the first statement to $M/N$, observing that $J(A)
  (M/N) = (J(A)M + N)/N = M/N$ by assumption, so $M/N = 0$ and $M = N$.
\end{proof}

\begin{definition}
  A ring $A$ is \pojem{local} if $A \ne \underline{0}$ and $A$ has a unique
  maximal ideal $\mathfrak{m}$.
\end{definition}

\begin{example}
  The ring $\Z_{(2)} = \{ \frac{a}{b} \in \Q \such 2 \nmid b \}$ has
  $J(\Z_{(2)}) = 2 \Z_{(2)}$.
  This is the unique maximal ideal, as any element not in $2 \Z_{(2)}$ is
  invertible.
\end{example}

\begin{remark}
  If $(A, \mathfrak{m})$ is local, then $A / \mathfrak{m}$ is a field, and
  $\mathfrak{m} = J(A)$.
\end{remark}

\begin{corollary}
  Let $(A, \mathfrak{m})$ be local and $M_A$ a finitely generated $A$-module.
  If $x_1, \ldots, x_r \in M$ are such that $x_1 + \mathfrak{m} M, \ldots, x_r +
  \mathfrak{m} M$ is a basis of the $(A/\mathfrak{m})$-vector space $M /
  \mathfrak{m} M$, then $x_1, \ldots, x_r$ generate $M$ as an $A$-module.
\end{corollary}

\begin{definition}
  A \pojem{complex} $(M_\cdot, f_\cdot)$ is a sequence of modules $(M_n)_n$
  together with homomorphisms $f_n: M_n \to M_{n+1}$ such that $f_{n+1} \circ
  f_n = 0$.
  We say that a sequence $(M_n)_n$ is \pojem{exact} if $\im f_n = \jedro
  f_{n+1}$ for all $n$.
\end{definition}

\begin{definition}
  A \pojem{short} exact sequence is an exact sequence of the form
  \[\begin{tikzcd}
	  0 & M & N & P & 0
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", from=1-2, to=1-3]
	  \arrow["g", from=1-3, to=1-4]
	  \arrow[from=1-4, to=1-5]
	\end{tikzcd}\]
\end{definition}

\begin{remark}
  In the sequence above, $f$ is injective and $g$ is surjective.
\end{remark}

\begin{example}
  Let $N \le M$.
  Then
  \[\begin{tikzcd}
	  0 & N & M & {M/N} & 0
	  \arrow[from=1-1, to=1-2]
	  \arrow[hook, from=1-2, to=1-3]
	  \arrow["\pi", two heads, from=1-3, to=1-4]
	  \arrow[from=1-4, to=1-5]
	\end{tikzcd}\]
  is a short exact sequence.
\end{example}

\begin{example}
  \[\begin{tikzcd}
	  0 & \Z & \Z & {\Z/n \Z} & 0
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", from=1-2, to=1-3]
	  \arrow["g", from=1-3, to=1-4]
	  \arrow[from=1-4, to=1-5]
	\end{tikzcd}\]
  is a short exact sequence for $f(x) = nx$ and $g(y) = y + n \Z$.
\end{example}

\begin{remark}
  In the short exact sequence
  \[\begin{tikzcd}
	  0 & M & N & P & 0
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", from=1-2, to=1-3]
	  \arrow["g", from=1-3, to=1-4]
	  \arrow[from=1-4, to=1-5]
	\end{tikzcd}\]
  we have $M \cong \jedro g$ and $P \cong N / \im f$.
  Then the following diagram commutes and has exact rows:
  \[\begin{tikzcd}
	  0 & M & N & P & 0 \\
	  0 & K & N & {N/K} & 0
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", from=1-2, to=1-3]
	  \arrow["f"', from=1-2, to=2-2]
	  \arrow["g", from=1-3, to=1-4]
	  \arrow["\id"', from=1-3, to=2-3]
	  \arrow[from=1-4, to=1-5]
	  \arrow["{(\hat{g})^{-1}}"', from=1-4, to=2-4]
	  \arrow[from=2-1, to=2-2]
	  \arrow["", hook, from=2-2, to=2-3]
	  \arrow["\pi", two heads, from=2-3, to=2-4]
	  \arrow[from=2-4, to=2-5]
	\end{tikzcd}\]
  for $K = \jedro g = \im f$ and $\hat{g}(n + K) = g(n)$.
\end{remark}

\begin{lemma}
  \label{lemma:koma-01-ses}
  For a short exact sequence $0 \to M \xrightarrow{f} N \xrightarrow{g} P \to 0$
  the following are equivalent:
  \begin{itemize}
  \item There exists a commutative diagram with exact rows
	\[
	  \begin{tikzcd}
		0 & M & N & P & 0 \\
		0 & M & M \oplus P & P & 0
		\arrow[from=1-1, to=1-2]
		\arrow["f", from=1-2, to=1-3]
		\arrow["\id"', from=1-2, to=2-2]
		\arrow["g", from=1-3, to=1-4]
		\arrow["h"', from=1-3, to=2-3]
		\arrow[from=1-4, to=1-5]
		\arrow["\id"', from=1-4, to=2-4]
		\arrow[from=2-1, to=2-2]
		\arrow["\hat{f}", from=2-2, to=2-3]
		\arrow["\hat{g}", from=2-3, to=2-4]
		\arrow[from=2-4, to=2-5]
	  \end{tikzcd}
	\]
	for $\hat{f}(m) = (m, 0)$ and $\hat{g}(m, p) = p$.
  \item there exists a homomorphism $s: P \to N$ such that $g \circ s = \id_P$,
  \item there exists a homomorphism $r: M \to N$ such that $r \circ f = \id_M$.
  \end{itemize}
  In this case $h: N \to M \oplus P$ is an isomorphism.
  We say that the short exact sequence \pojem{splits}.
\end{lemma}

For $A$-modules $M, N$, the set $\Hom(M, N)$ is itself an $A$-module for
pointwise operations.
Then we have two functors:
\begin{itemize}
\item the covariant functor $\Hom(M, \cdot): X \mapsto \Hom(M, X)$ which maps a
  morphism $X \xrightarrow{f} Y$ to $f_*(g) = f \circ g$,
\item the contravariant functor $\Hom(\cdot, N): X \mapsto \Hom(X, N)$, which
  maps from the opposite category of the category of $A$-modules, into the
  category of $A$-modules.
  It maps a homomorphism $X \xrightarrow{f} Y$ to $f^*(g) = g \circ f$.
\end{itemize}

\begin{lemma}
  \label{lemma:koma-01-exact}
  A sequence $0 \to N \xrightarrow{f} M \xrightarrow{g} P$ is exact if and
  only if for any $A$-module $X$, the sequence $0 \to \Hom(X, N)
  \xrightarrow{f_*} \Hom(X,M) \xrightarrow{g_*} \Hom(X,P)$ is exact.
  A sequence $N \xrightarrow{f} M \xrightarrow{g} P \to 0$ is exact if and only
  if for any $A$-module $X$, $0 \to \Hom(P, X) \xrightarrow{g^*} \Hom(M,X)
  \xrightarrow{f^*} \Hom(N,X)$ is exact.
\end{lemma}

\begin{remark}
  The Hom-functors are left exact.
\end{remark}

\begin{definition}
  Let $M_1, \ldots, M_n$ and $P$ be $A$-modules.
  A map $f: M_1 \times \cdots \times M_n \to P$ is \pojem{$A$-multilinear} if
  for every index $i$,
  \begin{align*}
	f(m_1, \ldots, m_{i-1}, a m_i + b m_i', m_{i+1}, \ldots, m_n)
	&= a f(m_1, \ldots, m_{i-1}, m_i, m_{i+1}, \ldots, m_n) \\
	&+ b f(m_1, \ldots, m_{i-1}, m_i', m_{i+1}, \ldots, m_n).
  \end{align*}
  The \pojem{tensor product} $M_1 \otimes \cdots \otimes M_n$ is the $A$-module
  together with the multilinear map $\otimes: M_1 \times \cdots \times M_n \to
  M_1 \otimes \cdots \otimes M_n$, defined by the following universal property:
  For every $A$-module $P$ and every multilinear map $f: M_1 \times \cdots
  \times M_n \to P$ there exists a unique $A$-homomorphism $\hat{f}: M_1 \otimes
  \cdots \otimes M_n \to P$ such that $\hat{f} \circ \otimes = f$, so that the
  diagram below commutes.
  \[
	\begin{tikzcd}
	  {M_1 \times \cdots \times M_n} & {M_1 \otimes \cdots \otimes M_n} \\
	  & P
	  \arrow["\otimes", from=1-1, to=1-2]
	  \arrow["f"', from=1-1, to=2-2]
	  \arrow["{\hat{f}}", from=1-2, to=2-2]
	\end{tikzcd}
  \]
\end{definition}

\begin{remark}
  The tensor product can also be written in terms of elementary tensors,
  \[
	M \otimes_A N = \left\{ \sum_{i=1}^s m_i \otimes n_i \such m_i \in M, n_i
	  \in N \right\}.
  \]
\end{remark}

\begin{example}
  In $\Z \otimes_\Z \Z / 2 \Z$, we have $2 \otimes 1 = 1 \otimes (2 \cdot 1) =
  0$.
  But in $2 \Z \otimes_\Z \Z / 2 \Z$, this doesn't hold.
  The map $(2x, y) \mapsto xy$ is bilinear, and it maps $2 \otimes 1$ to a
  nonzero element.
\end{example}

\begin{remark}
  Note that $(M_1 \otimes M_2) \otimes M_3 \cong M_1 \otimes (M_2 \otimes M_3)
  \cong M_1 \otimes M_2 \otimes M_3$.
  Also, $M_1 \otimes M_2 \cong M_2 \otimes M_1$.
\end{remark}

Let $M$ be an $A$-module.
Then we have a functor $M \otimes \cdot: X \mapsto M \otimes X$, which maps $X
\xrightarrow{f} Y$ to $\id \otimes f: m \otimes x \mapsto m \otimes f(x)$.

\begin{theorem}[Hom-$\otimes$ adjunction]
  Let $M$ be an $A$-module.
  Then $\cdot \otimes M$ is left adjoint to $\Hom(M, \cdot)$.
  Equivalently, for all $A$-modules $M, N, P$, there is an $A$-isomorphism
  \begin{align*}
	\Hom(N \otimes M, P) &\to \Hom(N, \Hom(M, P)) \\
	f &\mapsto \left( n \mapsto (m \mapsto f(n \otimes m)) \right)
  \end{align*}
  with inverse $\rho \mapsto \left( n \otimes m \mapsto \rho(n)(m) \right)$.
\end{theorem}

\begin{corollary}
  The functor $M \otimes \cdot$ is right exact, i.e.~for every exact sequence $N
  \to P \to Q \to 0$, also $M \otimes N \to M \otimes P \to M \otimes Q \to 0$
  is exact.
  Also,
  \[
	M \otimes \left( \bigoplus_{i \in I} N_i \right)
	\cong \bigoplus_{i \in I} M \otimes N_i
  \]
  for all families $\{N_i\}_{i \in I}$.
\end{corollary}

\begin{proof}
  For the first claim, we have $\Hom(M \otimes X, Y) \cong \Hom(M, \Hom(X, Y))$
  for all $A$-modules $X, Y$.
  The sequence $0 \to \Hom(Q,X) \to \Hom(P,X) \to \Hom(N,X)$ is also exact by
  lemma~\ref{lemma:koma-01-exact}, and using the same lemma again,
  $0 \to \Hom(M, \Hom(Q, X)) \to \Hom(M, \Hom(P, X)) \to \Hom(M, \Hom(N, X))$
  is also exact.
  These terms are isomorphic to $0 \to \Hom(M \otimes Q, X) \to \Hom(M \otimes
  P, X) \to \Hom(M \otimes N, X)$.
  If we use lemma~\ref{lemma:koma-01-exact} backwards, we get that
  $M \otimes N \to M \otimes P \to M \otimes Q \to 0$ is exact.

  We skip the proof of the second claim, it's not that hard.
  We can construct an isomorphism using the universal properties of direct sums
  and tensor products.
\end{proof}

\begin{example}
  If $I \trianglelefteq A$ and $M$ is an $A$-module, then $M / IM \cong M
  \otimes_A A/I$.
  We have a short exact sequence $0 \to I \to A \to A/I \to 0$ with the
  inclusion and projection maps, so we get
  $I \otimes M \to A \otimes M \to A/I \otimes M \to 0$.
  Now we take the map $\mu: A \otimes M \to M$ defined by $a \otimes m \mapsto
  am$, which has inverse $m \mapsto 1 \otimes m$.
  Since $\im \left. \mu \right|_{I \otimes M} = IM$, this gives us
  \[
	M / IM \cong (A \otimes M) / (I \otimes M) \cong A / (I \otimes M).
  \]
\end{example}

\begin{proposition}
  If $A \ne \underline{0}$ and $A^{(I)} \cong A^{(J)}$ for sets $I, J$, then
  $\abs{I} = \abs{J}$.
\end{proposition}

\begin{proof}
  Let $M \in \Max(A)$, then $A / M$ is a field, call it $K$.
  Then
  \[
	A^{(I)} \otimes_A A/M \cong (A \otimes A/M)^{(I)} \cong (A/M)^{(I)} =
	K^{(I)},
  \]
  so these are $K$-vector spaces.
  From $A^{(I)} \cong A^{(J)}$ we get $K^{(I)} \cong K^{(J)}$, and since the
  dimension of a vector space is well-defined, this concludes the proof.
\end{proof}

\begin{definition}
  Let $A \ne \underline{0}$.
  If $M$ is a finitely generated free $A$-module, its \pojem{rank} is the unique
  $n \in \N_0$ such that $M \cong A^n$.
\end{definition}

\podnaslov{Projective, injective and flat modules}

Let $M$ be a module over some ring $A$.
Note the following:
\begin{itemize}
\item $\cdot \otimes M$ is not exact, as it doesn't preserve the short exact
  sequence $0 \to 2 \Z \to \Z \to \Z / 2 \Z \to 0$ for $M = \Z$,
\item $\Hom(M, \cdot)$ and $\Hom(\cdot, M)$ are not right exact, as they don't
  preserve that sequence for $M = \Z / 2 \Z$.
\end{itemize}

\begin{definition}
  A module $M$ is called \pojem{projective} if $\Hom(M, \cdot)$ is exact.
  It is \pojem{injective} if $\Hom(\cdot, M)$ is exact.
  It is \pojem{flat} if $M \otimes \cdot$ is exact.
\end{definition}

\begin{theorem}
  For an $A$-module $P$, the following are equivalent:
  \begin{enumerate}
  \item $P$ is projective,
  \item for every epimorphism $g: M_A \to N_A$, the induced $g_*: \Hom(P, M) \to
	\Hom(P, N)$ is an epimorphism,
  \item for every diagram with an exact row of the form below, there exists a
	$\psi$ such that the diagram commutes:
	\[\begin{tikzcd}
		& P \\
		M & N & 0
		\arrow["{\exists \psi}"', dashed, from=1-2, to=2-1]
		\arrow["\varphi", from=1-2, to=2-2]
		\arrow["f"', from=2-1, to=2-2]
		\arrow[from=2-2, to=2-3]
	  \end{tikzcd}\]
  \item every epimorphism $g: M \to P$ splits, i.e.~there exists $s: P \to M$
	such that $g \circ s = \id_P$,
  \item there exists an $A$-module $M$ such that $M \oplus P$ is free.
  \end{enumerate}
\end{theorem}

\begin{proof}
  1 to 2 is clear.
  2 to 3:
  By assumption, $f_*: \Hom(P, M) \to \Hom(P, N)$ is an epimorphism.
  Since $f_*$ is surjective, there exists $\psi \in \Hom(P, M)$ such that
  $\varphi = f_*(\psi) = f \circ \psi$.
  This is precisely the commutativity of the diagram.

  3 to 4:
  Consider the following diagram.
  \[\begin{tikzcd}
	  & P \\
	  M & P & 0
	  \arrow["{\exists s}"', dashed, from=1-2, to=2-1]
	  \arrow["\id", from=1-2, to=2-2]
	  \arrow["g"', from=2-1, to=2-2]
	  \arrow[from=2-2, to=2-3]
	\end{tikzcd}\]
  Since $g$ is surjective, by assumption, there exists a map $s$ for which the
  diagram commutes.
  This is the splitting map.

  4 to 5:
  Let $g: A^{(I)} \to P$ be an epimorphism for some index set $I$.
  This gives us a short exact sequence
  \[
	0 \to \jedro g \to A^{(I)} \xrightarrow{g} P \to 0.
  \]
  By assumption, this sequence splits, so $A^{(I)} \cong P \oplus \jedro g$ by
  lemma~\ref{lemma:koma-01-ses}.

  5 to 1:
  Let
  \[
	0 \to M \xrightarrow{f} N \xrightarrow{g} Q \to 0
  \]
  be exact.
  Consider the sequence
  \[
	0 \to \Hom(P, M) \xrightarrow{f_*} \Hom(P, N) \xrightarrow{g_*} \Hom(Q, N)
	\to 0.
  \]
  By left exactness of $\Hom(P, \cdot)$, we only have to check surjectivity of
  $g_*$.
  Let $\varphi \in \Hom(P, Q)$.
  We need to show that there exists $\psi: P \to N$ such that $g_*(\psi) =
  g\circ \psi = \varphi$.

  Fix a module $C_A$ and an index set $I$ such that $P \oplus C \cong A^{(I)}$,
  let $\pi: A^{(I)} \to P$ be the canonical projection and $\varepsilon: P \to
  A^{(I)}$ the embedding such that $\pi \circ \varepsilon = \id_P$.
  For each standard basis vector $e_i \in A^{(I)}$, choose $n_i \in N$ such that
  $g(n_i) = \varphi \circ \pi(e_i)$ (we can do this since $g$ is surjective).
  Then there exists a map $\Psi \in \Hom(A^{(I)}, N)$ such that $\Psi(e_i) =
  n_i$ for each $i \in I$.
  By construction, $g \circ \Psi = \varphi \circ \pi$.
  We define $\psi = \Psi \circ \varepsilon$.
  Then the diagram below commutes.
  \[\begin{tikzcd}
	  & {A^{(I)}} \\
	  & P \\
	  N & Q & 0
	  \arrow["\pi", from=1-2, to=2-2]
	  \arrow["\Psi"', curve={height=12pt}, from=1-2, to=3-1]
	  \arrow["\varepsilon", shift left=3, from=2-2, to=1-2]
	  \arrow["\psi"', dashed, from=2-2, to=3-1]
	  \arrow["\varphi", from=2-2, to=3-2]
	  \arrow["g"', two heads, from=3-1, to=3-2]
	  \arrow[from=3-2, to=3-3]
	\end{tikzcd}\]
\end{proof}

\begin{example}
  Free modules are projective.
\end{example}

\begin{example}
  For $A = \Z / 6 \Z \cong \Z / 2 \Z \oplus \Z / 3 \Z$.
  Then $\Z / 2 \Z$ is a projective $A$-module, but not free.
\end{example}

\begin{corollary}
  Let $\{P_i\}_{i \in I}$ be a family of $A$-modules.
  Then all $P_i$ are projective if and only if their direct sum $\bigoplus_i
  P_i$ is projective.
\end{corollary}

\begin{definition}
  An $A$-module $E$ is \pojem{injective} if $\Hom(\cdot, E)$ is exact.
\end{definition}

\begin{theorem}
  For an $A$-module $E$, the following are equivalent:
  \begin{enumerate}
  \item $P$ is injective,
  \item for every monomorphism $f: M \to N$, $f_*$ is an epimorphism,
  \item for every diagram with exact row of the below form, there exists a
	homomorphism $\psi$ such that $\varphi = \psi \circ f$,
	\[\begin{tikzcd}
		0 & M & N \\
		& E
		\arrow[from=1-1, to=1-2]
		\arrow["f", from=1-2, to=1-3]
		\arrow["\varphi", from=1-2, to=2-2]
		\arrow["\exists \psi", dashed, from=1-3, to=2-2]
	  \end{tikzcd}\]
  \item every monomorphism $f: E \to M$ splits, i.e.~there exists $r: M \to N$
	such that $r \circ f = \id_E$,
  \item (Baer's criterion) for every $I \trianglelefteq A$, the inclusion map
	$j: I \to A$, and every diagram of the below form, there exists a $\psi$
	such that $\varphi = \psi \circ j$,
	\[\begin{tikzcd}
		0 & I & A \\
		& E
		\arrow[from=1-1, to=1-2]
		\arrow["j"', hook, from=1-2, to=1-3]
		\arrow["\varphi"', from=1-2, to=2-2]
		\arrow["{\exists \psi}", dashed, from=1-3, to=2-2]
	  \end{tikzcd}\]
  \end{enumerate}
\end{theorem}

\begin{proof}
  The equivalence of 1 and 2 is clear, since $\Hom(\cdot, E)$ is left-exact in
  any case, so we need only check right exactness.
  2 and 3 are equivalent, since $f_*$ is surjective if and only if for every
  $\varphi \in \Hom(M, E)$ there is a homomorphism $\psi$ such that $\varphi =
  \psi \circ f$, but this is exactly 3.

  3 to 4:
  Consider
  \[\begin{tikzcd}
	  0 & E & M \\
	  & E
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", from=1-2, to=1-3]
	  \arrow["{\id_E}"', from=1-2, to=2-2]
	  \arrow["{\exists r}", dashed, from=1-3, to=2-2]
	\end{tikzcd}\]
  Then by 3, we have the existence of $r$.

  4 to 3:
  Let $K = \{ (\varphi(m), -f(m)) \in E \times N \such m \in M \}$ and $Q = E
  \times N / K$.
  There are homomorphisms $j_E: E \to Q$, which maps $e \mapsto (e, 0) + K$ and
  $j_N: N \to Q$, which maps $n \mapsto (0,n) + K$.
  We can check that $j_E$ is a monomorphism: if $e \in E$ such that $j_E(e) =
  0$, then $(e,0) \in K$, so there exists $m \in M$ such that $e = \varphi(m)$
  and $0 = f(m)$, but since $f$ is a monomorphism, $m = 0$ and $e = 0$.

  \[\begin{tikzcd}
	  0 & M & N \\
	  & E & Q
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", from=1-2, to=1-3]
	  \arrow["\varphi"', from=1-2, to=2-2]
	  \arrow["{j_N}", from=1-3, to=2-3]
	  \arrow["{j_E}", from=2-2, to=2-3]
	  \arrow["r", shift left=3, from=2-3, to=2-2]
	\end{tikzcd}\]

  Then by assumption, there exists $r \in \Hom(Q,E)$ such that $r \circ j_E =
  \id_E$.
  Define $\psi = r \circ j_N$.
  Then for $m \in M$, we have
  \begin{align*}
	\varphi(m)
	&= r \circ j_E \circ \varphi(m)
	= r((\varphi(m), 0) + K)
	= r( (\varphi(m), 0) - (\varphi(m), -f(m)) + K ) \\
	&= r((0, f(m)) + K)
	= r \circ j_N(f(m))
	= \psi \circ f(m).
  \end{align*}
  Which proves the implication.

  3 to 5 is easy.
  5 to 3:
  Let $\Omega := \{ (N', \psi') \such f(M) \le N' \le N, \psi \in \Hom(N', E),
  \psi \circ f = \varphi \}$.
  There is a partial order on $\Omega$, given by
  \[
	(N', \psi') \le (N'', \psi'') \iff N' \subseteq N'' \land \left. \psi''
	\right|_{N'} = \psi'.
  \]
  Clearly $\Omega \ne \varnothing$, as $(f(M), \varphi \circ f^{-1}) \in
  \Omega$.
  If $\Omega_0 \subseteq \Omega$ is a chain, then
  \[
	\left( \bigcup_{(N', \psi') \in \Omega_0}\!\!N'\,,\,\psi_0 \right)
  \]
  is an upper bound for $\Omega_0$ for $\psi_0$ defined by $\left. \psi_0
  \right|_{N'} = \psi'$ for all $(N', \psi') \in \Omega_0$.
  Then by Zorn's lemma, there exists a maximal $(N', \psi') \in \Omega$.

  We claim that $N' = N$.
  Suppose that $N' \subsetneq N$ and let $x \in N \setminus N'$.
  Then $I = \{ a \in A \such ax \in N' \}$ is an ideal of $A$.
  Define $\mu_I : I \to E$ by $a \mapsto \psi'(ax)$.
  This is an $A$-homomorphism, so by assumption, we can extend it to $\mu:
  A_A \to E_A$.
  Then $N'' := N' + Ax$ is a module with $N'' \supsetneq N'$, and there is a
  homomorphism $\psi'': N'' \to E$, defined with $n + ax \mapsto \psi'(n) +
  \mu(a)$.

  We need to check $\psi''$ is well defined.
  Suppose that $n + ax = n' + a' x$ with $n, n' \in N'$ and $a, a' \in A$.
  Then $n - n' = (a'-a)x$, so $a' - a \in I$ by definition of $I$, so
  \[
	\mu(a') - \mu(a)
	= \mu(a' - a)
	= \mu_I(a' - a)
	= \psi'((a'-a)x)
	= \psi'(n - n')
	= \psi'(n) - \psi'(n')
  \]
  meaning $\psi'(n) + \mu(a) = \psi'(n') + \mu(a')$, so $\psi''$ is
  well-defined.
  Then $(N'', \psi'') \in \Omega$, which contradicts the maximality of $(N',
  \psi')$.
\end{proof}

\begin{example}
  For $A = \Z$, we see that $\Z_\Z$ is not injective, as for $n \ne \pm 1$ and
  $f(x + n \Z) = 1$, the map does not extend to $\Z$.
  \[\begin{tikzcd}
	  0 & {n\Z} & \Z \\
	  & \Z
	  \arrow[from=1-1, to=1-2]
	  \arrow[hook, from=1-2, to=1-3]
	  \arrow["f"', from=1-2, to=2-2]
	  \arrow["\nexists", dashed, from=1-3, to=2-2]
	\end{tikzcd}\]
\end{example}

\begin{example}
  The module $\Q_\Z$ is injective, as we can extend $f: n \mapsto q$ with $g: 1
  \mapsto f / q$.
  \[\begin{tikzcd}
	  0 & {n \Z} & \Z \\
	  & \Q
	  \arrow[from=1-1, to=1-2]
	  \arrow[hook, from=1-2, to=1-3]
	  \arrow["f"', from=1-2, to=2-2]
	  \arrow["g", dashed, from=1-3, to=2-2]
	\end{tikzcd}\]
\end{example}

\begin{definition}
  Let $A$ be a domain.
  An $A$-module $M$ is \pojem{divisible} if for all $m \in M$ and for all $a \in
  A^*$, there exists an element $m_0 \in M$ such that $m = a m_0$.
\end{definition}

\begin{example}
  The $\Z$-modules $\Q$ and $\Q / \Z$ are divisible, but $\Z / n \Z$ is not.
\end{example}

\begin{proposition}
  Let $A$ be a principal ideal domain.
  Then $M_A$ is injective if and only if $M_A$ is divisible.
\end{proposition}

\begin{corollary}
  Let $\{E_i\}_{i \in I}$ be a family of modules.
  Then all $E_i$ are injective if and only if their product $\prod_i E_i$ is
  injective.
\end{corollary}

\begin{lemma}[snake lemma]
  Given a diagram of $A$-modules
  \[\begin{tikzcd}
	  & M & N & P & 0 \\
	  0 & {M'} & {N'} & {P'}
	  \arrow["i", from=1-2, to=1-3]
	  \arrow["f", from=1-2, to=2-2]
	  \arrow[from=1-3, to=1-4]
	  \arrow["g", from=1-3, to=2-3]
	  \arrow[from=1-4, to=1-5]
	  \arrow["h", from=1-4, to=2-4]
	  \arrow[from=2-1, to=2-2]
	  \arrow[from=2-2, to=2-3]
	  \arrow["p", from=2-3, to=2-4]
	\end{tikzcd}\]
  with exact rows, there is a an exact sequence
  \[
	\jedro f \to \jedro g \to \jedro h \to \cojedro f \to \cojedro g \to
	\cojedro h.
  \]
  If $i$ is mono, so is $\left. i \right|_{\jedro f}$.
  If $p$ is an epi, then so is $\bar{p}: \cojedro g \to \cojedro h$.
\end{lemma}

\begin{lemma}
  Let $E$ be an $A$-module and $0 \to M \xrightarrow{f} N \xrightarrow{g} P \to
  0$ be a split short exact sequence.
  Then $0 \to E \otimes M \xrightarrow{E \otimes f} E \otimes N \xrightarrow{E
	\otimes g} E \otimes P \to 0$ is also a short exact sequence.
\end{lemma}

\begin{proof}
  Sketch.
  Apply $E \otimes \cdot$ to
  \[\begin{tikzcd}
	  0 & M & N & P & 0 \\
	  0 & M & {M \oplus P} & P & 0
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", from=1-2, to=1-3]
	  \arrow["{\id_M}", from=1-2, to=2-2]
	  \arrow["g", from=1-3, to=1-4]
	  \arrow["\sim", from=1-3, to=2-3]
	  \arrow[from=1-4, to=1-5]
	  \arrow["{\id_P}", from=1-4, to=2-4]
	  \arrow[from=2-1, to=2-2]
	  \arrow[from=2-2, to=2-3]
	  \arrow[from=2-3, to=2-4]
	  \arrow[from=2-4, to=2-5]
	\end{tikzcd}\]
  Then note that $E \otimes \cdot$ preserves direct sums.
\end{proof}

\begin{remark}
  The functors $\Hom(M, \cdot)$ and $\Hom(\cdot, M)$ have the same property.
\end{remark}

\begin{theorem}
  For an $A$-module $E$, the following are equivalent:
  \begin{enumerate}
  \item $E$ is flat (i.e.~$E \otimes_A \cdot$ is exact),
  \item for every monomorphism $f: M \to N$, also $E \otimes f: e \otimes m
	\mapsto e \otimes f(m)$ is a monomorphism,
  \item for every finitely generated ideal $I \trianglelefteq A$, the
	homomorphism $\mu_I : I \otimes E \to E$, mapping $x \otimes e \mapsto xe$,
	is a monomorphism, and hence induces an isomorphism $I \otimes E \to IE$.
  \end{enumerate}
\end{theorem}

\begin{proof}
  The equivalence of 1 and 2 is easy, as we know $E \otimes \cdot$ is
  left-exact.
  2 to 3:
  Apply the assumption to the inclusion $I \to A$ and use $A \otimes_A E \cong
  E$ by $a \otimes e = ae$.

  3 to 2:
  Let $f: M \to N$ be a monomorphism.
  Observe that if $\varphi: N \to N'$ is an isomorphism, then it suffices to show
  the claim for the inclusion map $j: M' := \varphi(f(M)) \to N' := \varphi(N)$.
  If we apply $E \otimes \cdot$ to
  \[\begin{tikzcd}
	  0 & M & N \\
	  & {M'} & {N'}
	  \arrow[from=1-1, to=1-2]
	  \arrow["f", hook, from=1-2, to=1-3]
	  \arrow["{\varphi \circ f}"', from=1-2, to=2-2]
	  \arrow["\varphi", from=1-3, to=2-3]
	  \arrow["j"', hook, from=2-2, to=2-3]
	\end{tikzcd}\]
  then we get
  \[\begin{tikzcd}
	  {E \otimes M} & {E \otimes N} \\
	  {E \otimes M'} & {E \otimes N'}
	  \arrow["{E \otimes f}", from=1-1, to=1-2]
	  \arrow["{E \otimes (\varphi \circ f)}"', from=1-1, to=2-1]
	  \arrow["{E \otimes \varphi}", from=1-2, to=2-2]
	  \arrow["{E \otimes j}"', from=2-1, to=2-2]
	\end{tikzcd}\]
  so $\jedro (E \otimes M) \cong \jedro (E \otimes M')$ via $E \otimes (\varphi
  \circ f)$.

  Also observe the following:
  Let $M \le N$ and $j: M \to N$ be the inclusion map.
  If for every finitely generated $M' \le M$ and the inclusion map
  $j': M' \to N$, we have that $E \otimes j'$ is mono, then also $E \otimes j$
  is a mono.
  Let
  \[
	x = \sum_{i=1}^s e_i \otimes m_i \in \jedro (E \otimes j)
  \]
  with $s \ge 0$, $e_i \in E$ and $m_i \in M$.
  Let $M' = \sk{m_1, \ldots, m_s} \le M$ be a finitely generated submodule of
  $M$, and let $j': M' \to N, \varepsilon: M' \to N$ be inclusions.
  Then the following diagram commutes:
  \[\begin{tikzcd}
	  {E \otimes M'} & {E \otimes M} & {E \otimes N}
	  \arrow["{E \otimes \varepsilon}", from=1-1, to=1-2]
	  \arrow["{E \otimes j'}"', curve={height=16pt}, from=1-1, to=1-3]
	  \arrow["{E \otimes j}", from=1-2, to=1-3]
	\end{tikzcd}\]
  Let
  \[
	x' = \sum_{i=1}^s e_i \otimes m_i \in E \otimes M'.
  \]
  We can see that $(E \otimes \varepsilon)(x') = x$, and by assumption, $(E
  \otimes j) \circ (E \otimes \varepsilon) (x') = 0$, but then $(E \otimes
  j')(x') = 0$, which means $x' = 0$, since $E \otimes j'$ is a monomorphism.
  This means $x = 0$, so $E \otimes j$ is injective.

  Let $f: M \to N$ be a monomorphism.
  Consider the following special case: $M \le N$ and $N$ is finitely generated
  free module.
  Let $j: M \to N$ be the inclusion.
  Use induction on $r = \dim N$.
  If $r = 0$, there is nothing to check.
  If $r = 1$, then $N \cong A_A$, so the claim holds by assumption and the above
  observations.
  For the induction step, suppose $r \ge 2$.
  Then write $N = F_1 \oplus F_2$ with $\dim F_1 = r-1$ and $\dim F_2 = 1$.
  We have canonical epimorphisms $\pi_i: N \to F_i$ and canonical embeddings
  $\varepsilon_i: F_i \to N$.
  Let $M_1 = M \cap F_1 = \varepsilon_1^{-1}(M)$ and $M_2 = \pi_2(M) \cong M /
  M_1$.
  Then the following diagram has exact rows, with the bottom row being split
  exact:
  \[\begin{tikzcd}
	  0 & {M_1} & M & {M_2} & 0 \\
	  0 & {F_1} & N & {F_2} & 0
	  \arrow[from=1-1, to=1-2]
	  \arrow["{\left. \varepsilon_1 \right|_{M_1}}", from=1-2, to=1-3]
	  \arrow["j_1", hook, from=1-2, to=2-2]
	  \arrow["{\left. \pi_2 \right|_M}", from=1-3, to=1-4]
	  \arrow["j", hook, from=1-3, to=2-3]
	  \arrow[from=1-4, to=1-5]
	  \arrow["{j_2}", hook, from=1-4, to=2-4]
	  \arrow[from=2-1, to=2-2]
	  \arrow["{\varepsilon_1}", from=2-2, to=2-3]
	  \arrow["{\pi_2}", from=2-3, to=2-4]
	  \arrow[from=2-4, to=2-5]
	\end{tikzcd}\]
  We obtained $j_1 = \left. j \right|_{M_1}$ and $j_2$ by factoring $\pi_2 \circ
  j$ through $M_1$.
  We then use $E \otimes \cdot$ on the diagram above, and use the resulting
  diagram in the snake lemma.
  We can use the induction hypothesis on $F_1$ and $F_2$, so $\jedro(E \otimes
  j_1) = 0$ and $\jedro (E \otimes j_2) = 0$.
  Then $\jedro (E \otimes j) = 0$, which is exactly what we wanted to prove.
\end{proof}

% LocalWords:  nilradical nilpotents primality Nakayama Hom multilinear adjoint
% LocalWords:  adjunction monomorphism Baer's
